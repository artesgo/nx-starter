<div class="flex flex-row gap-6 justify-center items-center">
  <daisy-calendar (dateChange)="onDateChange($event)"></daisy-calendar>
  <div class="flex flex-col gap-2">
    <daisy-input
      id="budget"
      [(ngModel)]="description"
      size="sm"
    >
      Budget Item
    </daisy-input>
    <daisy-input
      id="budget"
      [(ngModel)]="amount"
      size="sm"
    >
      Amount
    </daisy-input>
  </div>

  <div class="flex flex-col gap-1">
    <div class="flex gap-2">
      <daisy-radio
        type="radio"
        value="none"
        name="recurrence"
        [formControl]="recurrence"
        id="none"
        size="sm"
      />None
    </div>

    <div class="flex gap-2">
      <daisy-radio
        type="radio"
        value="weekly"
        name="recurrence"
        [formControl]="recurrence"
        id="weekly"
        size="sm"
      />Weekly
    </div>

    <div class="flex gap-2">
      <daisy-radio
        type="radio"
        value="bi-weekly"
        name="recurrence"
        [formControl]="recurrence"
        id="biweekly"
        size="sm"
      />Bi-Weekly
    </div>

    <div class="flex gap-2">
      <daisy-radio
        type="radio"
        value="monthly"
        name="recurrence"
        [formControl]="recurrence"
        id="monthly"
        size="sm"
      />Monthly
    </div>

    <div class="flex gap-2">
      <daisy-radio
        type="radio"
        value="yearly"
        name="recurrence"
        [formControl]="recurrence"
        id="yearly"
        size="sm"
      />Yearly
    </div>
  </div>

  <button
    [atgButton]="'primary'"
    (click)="addItem()"
  >
    Budget
  </button>
</div>

<!-- bar chart with month view -->
<table class="chart border border-primary hover:border-accent">
  <thead>
    <tr>
      <th>Date</th>
      <th>Description</th>
      <th>Amount</th>
      <th>Total</th>
      <th>Action</th>
      <th>Recurr</th>
    </tr>
  </thead>

  <tbody>
    @for (item of processedItems(); track $index) {
      @if (item.description !== 'Label') {
        <tr>
          <td>{{ item.date | date: 'MMMM dd, yyyy' }}</td>
          <td>{{ item.description }}</td>
          <td class="text-right">{{ item.amount | currency: 'USD' }}</td>
          <td class="text-right">{{ item.total | currency: 'USD' }}</td>
          <td><button (click)="removeItem(item.id)">X</button></td>
          <td>
            @if (item.recurring !== RECURRENCE.NONE) {
              <button (click)="recurr(item)">Recurr</button>
            }
          </td>
        </tr>
      }
    }
  </tbody>
</table>

<!-- grouped bar chart with month view -->
<!-- <div class="barchart">
  @for (group of groupedItems(); track $index) {
    <div class="flex flex-col">
      @for (item of group; track item) {
        <div
          title="{{ item.description }}"
          [style]="barStyle(item.amount)"
        ></div>
      }
    </div>
  }
</div> -->

<!-- grouped bar chart with month view -->
<om-flickering-grid
  [squareSize]="5"
  [color]="'#FC0'"
  class="flickering-grid"
>
  <div class="barchart">
    @for (dateTotal of groupTotals(); track $index) {
      <div
        class="bar border border-dashed border-primary hover:bg-accent"
        title="{{ dateTotal.total }} - {{ dateTotal.date | date: 'MMMM dd, yyyy' }}"
        [style]="barStyle(dateTotal.total)"
      >
        <div class="bar-text">
          @if (dateTotal.total > 0) {
            {{ dateTotal.total | currency: 'USD' }} - {{ dateTotal.date | date: 'MMM dd, yyyy' }}
          }
        </div>
      </div>
    }
  </div>
</om-flickering-grid>
