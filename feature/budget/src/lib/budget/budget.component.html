<div class="flex gap-2 items-center">
  <div class="flex flex-col gap-2">
    <daisy-input
      id="budget"
      [(ngModel)]="description"
      size="sm"
    >
      Budget Item
    </daisy-input>
    <daisy-input
      id="budget"
      [(ngModel)]="amount"
      size="sm"
    >
      Amount
    </daisy-input>
    <datepicker
      id="date"
      [(ngModel)]="date"
    />
    <label for="date">Date</label>
  </div>

  <div class="flex flex-col gap-1">
    <div class="flex gap-2">
      <input
        [(ngModel)]="recurring"
        value="none"
        name="recurrence"
        type="radio"
        id="none"
      />
      <label for="none">None</label>
    </div>

    <div class="flex gap-2">
      <input
        [(ngModel)]="recurring"
        value="weekly"
        name="recurrence"
        type="radio"
        inputId="weekly"
      />
      <label for="weekly">Weekly</label>
    </div>

    <div class="flex gap-2">
      <input
        [(ngModel)]="recurring"
        value="bi-weekly"
        name="recurrence"
        type="radio"
        inputId="bi-weekly"
      />
      <label for="bi-weekly">Bi-Weekly</label>
    </div>

    <div class="flex gap-2">
      <input
        [(ngModel)]="recurring"
        value="monthly"
        name="recurrence"
        type="radio"
        inputId="monthly"
      />
      <label for="monthly">Monthly</label>
    </div>

    <div class="flex gap-2">
      <input
        [(ngModel)]="recurring"
        value="yearly"
        name="recurrence"
        type="radio"
        inputId="yearly"
      />
      <label for="yearly">Yearly</label>
    </div>
  </div>

  <button
    [atgButton]="'primary'"
    (click)="addItem()"
  >
    Budget
  </button>
</div>

<!-- bar chart with month view -->
<table class="chart">
  <thead>
    <tr>
      <th>Date</th>
      <th>Description</th>
      <th>Amount</th>
      <th>Total</th>
      <th>Action</th>
      <th>Recurr</th>
    </tr>
  </thead>

  <tbody>
    @for (item of processedItems(); track $index) {
      @if (item.description !== 'Label') {
        <tr>
          <td>{{ item.date | date: 'MMMM dd, yyyy' }}</td>
          <td>{{ item.description }}</td>
          <td>{{ item.amount }}</td>
          <td>{{ item.total }}</td>
          <td><button (click)="removeItem(item.id)">X</button></td>
          <td>
            @if (item.recurring !== RECURRENCE.NONE) {
              <button (click)="recurr(item)">Recurr</button>
            }
          </td>
        </tr>
      }
    }
  </tbody>
</table>

<!-- grouped bar chart with month view -->
<!-- <div class="barchart">
  @for (group of groupedItems(); track $index) {
    <div class="flex flex-col">
      @for (item of group; track item) {
        <div
          title="{{ item.description }}"
          [style]="barStyle(item.amount)"
        ></div>
      }
    </div>
  }
</div> -->

<!-- grouped bar chart with month view -->
<om-flickering-grid [squareSize]="6">
  <div class="barchart">
    @for (dateTotal of groupTotals(); track $index) {
      <om-shine-border
        class="bar"
        title="{{ dateTotal.total }} - {{ dateTotal.date | date: 'MMMM dd, yyyy' }}"
        [style]="barStyle(dateTotal.total)"
      >
        <div class="bar-text">
          @if (dateTotal.total > 0) {
            {{ dateTotal.total }} - {{ dateTotal.date | date: 'MMM dd, yyyy' }}
          }
        </div>
      </om-shine-border>
    }
  </div>
</om-flickering-grid>
